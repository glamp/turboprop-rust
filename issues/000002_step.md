# Step 2: Git Integration and File Discovery

## Objective
Implement git repository detection and file discovery that respects .gitignore rules.

## Tasks
1. Add git repository detection
2. Implement file discovery using git ls-files
3. Add .gitignore respect functionality
4. Implement max-filesize filtering
5. Create file metadata structure
6. Add comprehensive tests using sample-codebases/poker

## Dependencies to Add
- `git2` - Git operations
- `walkdir` - File system traversal (fallback)

## Acceptance Criteria
- Can detect if current directory is a git repository
- Lists only git-tracked files (respects .gitignore)
- Filters files by max-filesize parameter
- Returns file metadata including size, path, last modified
- Works correctly with poker sample codebase
- Handles non-git directories gracefully
- Error messages are clear and actionable

## CLI Integration
```bash
tp index --repo . --max-filesize 2mb  # Should discover poker files
```

## Files Created/Modified
- `src/git.rs` - Git operations
- `src/files.rs` - File discovery and filtering
- `src/types.rs` - Core data structures
- `tests/integration_tests.rs` - Integration tests using poker codebase

## Test Cases
- Test with poker codebase (known structure)
- Test with non-git directory
- Test max-filesize filtering
- Test .gitignore respect