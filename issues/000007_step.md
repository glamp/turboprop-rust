# Step 7: Index Command Implementation with Progress Tracking

## Objective
Implement the complete `tp index` command with progress indicators and error handling.

## Tasks
1. Wire together file discovery, chunking, embedding, and indexing pipeline
2. Add progress bar showing indexing progress
3. Implement comprehensive error handling and recovery
4. Add index statistics and summary reporting
5. Optimize for batch processing efficiency
6. Create end-to-end tests with poker codebase

## Technical Approach
- Process files in batches for memory efficiency
- Stream processing: discover → read → chunk → embed → index
- Progress tracking with file counts and processing rates
- Graceful handling of individual file processing errors
- Summary statistics: files processed, chunks created, time taken

## Dependencies to Add
- `indicatif` - Progress bars and spinners
- `humantime` - Human-readable time formatting

## Acceptance Criteria
- `tp index --repo .` successfully indexes poker codebase
- Shows progress bar with current file being processed
- Displays final statistics (files processed, chunks, time taken)
- Handles individual file errors gracefully without stopping
- Creates complete index in `.turboprop/` directory
- Processes files in memory-efficient batches
- Supports `--max-filesize` parameter correctly
- Provides clear error messages for common issues

## CLI Integration
```bash
tp index --repo . --max-filesize 2mb
# Output:
# Discovering files... ✓ Found 12 files
# Processing files... [████████████████████████████████████████] 12/12 files
# Generated 156 chunks from 12 files in 2.3s
# Index saved to ./.turboprop/
```

## Files Created/Modified
- `src/commands/index.rs` - Index command implementation
- `src/progress.rs` - Progress reporting utilities
- `src/pipeline.rs` - Processing pipeline coordination
- `tests/integration/index_tests.rs` - End-to-end index tests

## Test Cases
- Test complete indexing pipeline with poker codebase
- Test progress reporting accuracy
- Test error handling for problematic files
- Test index directory creation and structure
- Test batch processing efficiency
- Verify index completeness and correctness